"use strict";function landingController(a,e,n,t,o,c,r,i,l,s,u,d,p,h){var f=this,m=c.navigator.userAgent;a.searchPlaceholder="Search by Doc ID/Description",d.pageTitle="Welcome to Worldox Web",a.openCats=!1,f.init=function(){p(function(){a.parentPanel=!0},-1e3)},a.$on("openPanel",function(e,n){switch(n.panel){case"ADVANCED SEARCH":a.templates=!0,a.getDefaultTemplate(!0);break;case"DIRECT ACCESS":a.showDirectAccess();break;case"UPLOAD":a.showUpload();break;case"NEW TAB":a.openNewTab()}}),window.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("drop",function(e){e&&e.preventDefault()},!1),a.openNewTab=function(){c.open("./landing","_blank")},a.softPop=!1,-1!=m.indexOf("Frowser")&&(a.softPop=!0),a.getDefaultTemplate=function(o){h.iniData("FindTemplatesList","1").then(function(e){var n=e.data.root,t={};if(""!=n.Header.ErrorCount)return DevExpress.ui.notify(n.Header.wd_Error_MSG,"error",4e3),!1;angular.forEach(n.items,function(e,n){"FindTemplatesTreePublic"!=e.K&&"FindTemplatesTreeOnlyMe"!=e.K&&"FindTemplatesTree"!=e.K&&"DefaultTab"!=e.K||(t[e.K]=e.D)}),a.setTemplate(t,o)},function(e){})},a.showUpload=function(){a.uploadToggle=!0,a.$broadcast("setFavQuick")},a.showDirectAccess=function(){a.directAccess=!0,a.$broadcast("setDirectAccess")},a.setTemplate=function(e,n){a.$broadcast("setTemplates",{defaults:e,type:n})},a.cancelPanel=function(){u.setUploadPanel(1),d.viewOpt=u.getUploadPanel(),a.uploadToggle=!1,a.directAccess=!1,a.templates=!1,a.openCats=!1,a.$broadcast("closeCats",{panelupdate:!1}),a.$broadcast("closespinner")},a.parentPanel=!1,a.searchBox="",a.uploadToggle=!1,f.searchTypeFlag=0,f.contexualList=[{text:"Search by Doc ID/Description",value:0,onClick:function(e){a.searchPlaceholder=e.itemData.text}},{text:"Search by Text",value:1,onClick:function(e){a.searchPlaceholder=e.itemData.text}},{text:"Search Doc ID/Description and Text",value:2,onClick:function(e){a.searchPlaceholder=e.itemData.text}},{text:"Search Doc ID/Description or Text",value:3,onClick:function(e){a.searchPlaceholder=e.itemData.text}}],f.searchTxtBox={elementAttr:{id:"searchLanding"},bindingOptions:{value:"searchBox",placeholder:"searchPlaceholder"},width:"50%",onValueChanged:function(e){a.searchBox=e.value},onEnterKey:function(e){f.searchWorldox(e.event.target.value)},onInitialized:function(e){setTimeout(function(){e.component.focus()},0)},onContentReady:function(){}},f.searchBtn={icon:"ms-Icon ms-Icon--Search",onClick:function(e){if(""==a.searchBox)return DevExpress.ui.notify("Search box is empty!","error",4e3),!1;d.searchTemplateType=!1,f.searchWorldox(a.searchBox)}},f.contexualMenuBtn={icon:"ms-Icon ms-Icon--FabricFolderSearch",onClick:function(){$("#searchContext").dxContextMenu("toggle",!0)}},$(".laContain").on("mouseover",function(){$(document).bind("keydown",function(e){$("#searchTxtBox input").focus()})}).on("mouseout",function(){$(document).unbind("keydown")}),f.contexualMenu={items:f.contexualList,target:"#contextBtn",onItemClick:function(e){f.searchTypeFlag=e.itemData.value}},f.searchWorldox=function(e){1===f.searchTypeFlag?(d.title="Text: "+e,d.bc="",t.path("/home").search({query:"?t "+encodeURIComponent(e)})):0===f.searchTypeFlag?t.path("/home").search({query:encodeURIComponent(e)}):2===f.searchTypeFlag?t.path("/home").search({query:"?D "+encodeURIComponent(e)+" OR ?E "+encodeURIComponent(e)+" AND ?T"+encodeURIComponent(e)}):t.path("/home").search({query:"?D "+encodeURIComponent(e)+" OR ?E "+encodeURIComponent(e)+" OR ?T"+encodeURIComponent(e)+" OR"})},$("#landingContainer").mouseover(function(e){d.checkOverLanding=!0}),$("#landingContainer").mouseout(function(e){d.checkOverLanding=!1})}angular.module("WDWeb"),landingController.$inject=["$scope","$http","$localStorage","$location","$q","$window","fileListUI","uxService","wdService","uploader","homeService","$rootScope","$timeout","leftNavService"],angular.module("WDWeb").controller("landingController",landingController);