angular.module("WDWeb").directive("wdProjects",function(o,n,a,e){return{templateUrl:"./WDWEB/shared/project/wdl.html",link:function(e,r,t){e.uploadMode="instantly",e.value=[],e.wdlUpload={uploadUrl:o.host+o.uploadLocation,labelText:"",selectButtonText:"Project",width:65,bindingOptions:{uploadMode:"uploadMode",value:"value"},onValueChanged:function(t){var e=t.value;if(0!=e.length){var r="",o=(1==e[0].name.split(".").length-1?e[r=0].name.split("."):(r=e[0].name.lastIndexOf("."),[e[0].name.slice(0,r),e[0].name.slice(r+1)]))[1].toUpperCase();$.each(e,function(e,r){if("WDL"!=o)return t.element.find(".dx-fileuploader-files-container .dx-fileuploader-cancel-button").eq(e).trigger("dxclick"),DevExpress.ui.notify("File must be a'WDL'!","error",4e3),!1})}},onUploadError:function(e){DevExpress.ui.notify("WDL failed to upload!","error",4e3)},onUploaded:function(e){a.wdlOpen(e.file.name).then(function(e){var r=e.data.project;if(""!=r.errorStatus.ErrorCount)return DevExpress.ui.notify(r.errorStatus.wd_Error_MSG,"error",4e3),!1;n.path("/home").search({query:"Project: "+r.path})},function(e){$log.error(e)})}}}}});