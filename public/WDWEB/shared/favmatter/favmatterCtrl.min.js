angular.module("WDWeb").controller("favmatterCtrl",["$scope","$rootScope","$route","$routeParams","$timeout","$log","$window","$localStorage","$location","wdService","homeService",function(n,r,a,e,t,o,l,i,c,s,u){var f=this;f.favmatters=[],f.favMattersTitle="",f.showFavMattersPanel=!1,f.spinner=!1,f.allFavMatters=[],n.textValue="",t(function(){angular.element(document).ready(function(){for(var e=document.querySelectorAll(".cabinetSpinner"),t=0;t<e.length;t++)new fabric.Spinner(e[t])})},1e3),n.$on("closeAllPanel",function(e,t){f.showFavMattersPanel=!1}),n.$on("favMattersEvent",function(e,t){var n=t.li;f.allFavMatters=t,f.showFavMattersPanel=!0,f.favMattersTitle=n.szPGID,f.spinner=!0,f.fmlistdata=[],f.filterFm="";var r=t.items.filter(function(e){return e.szPGID==n.szPGID}).map(function(e){return e.name=e.Desc.replace(e.szPGID+"\\",""),e});f.favmatters=r}),n.$on("favMatterCheckPanel",function(e,t){f.showFavMattersPanel&&r.$broadcast("favMattersEvent",t)}),n.wdFilterBox={placeholder:"Filter",elementAttr:{id:"wdFilterFavMatter"},onEnterKey:function(e){n.textValue=e.event.target.value},showClearButton:!0},n.wdFilterSideBtn={icon:"ms-Icon ms-Icon--Accept",onClick:function(e){var t=$("#wdFilterCabinet").dxTextBox("instance");n.textValue=t.option("value")},elementAttr:{class:"wdFilterSideBtn"}},n.scrollFM={scrollByContent:!0,scrollByThumb:!0,showScrollbar:"always",useNative:!0,height:function(){return window.innerHeight-191}},n.setHeight=function(){return window.innerHeight-191},f.closeFavmatter=function(){f.showFavMattersPanel=!1},f.setSelectMenu=function(e){f.setFmSelect=e},f.goTo=function(e,t){$(window).width()<=1024&&r.$emit("openMenuFMC",{}),f.showFavMattersPanel=!1,f.goToUrl(e),f.setFmSelect=e},f.goToUrl=function(e){var t=c.search();if(i.isOpeningDocPanel=!1,t.query!==e.Loc)return c.path("/home").search({query:e.Loc}),!1;a.reload()}}]).directive("favmatterMenu",function(r,e){return{templateUrl:"./WDWEB/shared/favmatter/favMatterMenu.html",link:function(n,t,e){r.on("click",function(e){t!==e.target&&t[0].contains(e.target)}),n.hoverMenuList=function(e){n.str=e.currentTarget.parentElement.innerText;var t=e.currentTarget.parentElement;t.scrollWidth>t.clientWidth?n.ttlLeftMenu="str":n.ttlLeftMenu=" "}}}});