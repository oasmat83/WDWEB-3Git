angular.module("WDWeb").directive("wdxSearch",["$document",function(e){return{restrict:"A",replace:!0,templateUrl:"./WDWEB/shared/search/search.html",scope:{clickOutside:"&"},link:function(e,o,n){},controller:function(c,t,n,a,e,o,r){c.searchBox="",c.searchPlaceholder="Search by Doc ID/Description",c.searchTypeFlag=0,c.contexualList=[{text:"Search by Doc ID/Description",value:0,onClick:function(e){c.searchPlaceholder=e.itemData.text}},{text:"Search by Text",value:1,onClick:function(e){c.searchPlaceholder=e.itemData.text}},{text:"Search Doc ID/Description and Text",value:2,onClick:function(e){c.searchPlaceholder=e.itemData.text}},{text:"Search Doc ID/Description or Text",value:3,onClick:function(e){c.searchPlaceholder=e.itemData.text}}],c.searchTxtBox={bindingOptions:{value:"searchBox",placeholder:"searchPlaceholder"},width:"100%",onValueChanged:function(e){c.searchBox=e.value},onEnterKey:function(e){c.searchWorldox(e.event.target.value)},onInitialized:function(e){setTimeout(function(){e.component.focus()},0)}},c.searchBtn={icon:"ms-Icon ms-Icon--Search",onClick:function(e){if(""==c.searchBox)return DevExpress.ui.notify("Search box is empty!","error",4e3),!1;a.searchTemplateType=!1,c.searchWorldox(c.searchBox)}},c.contexualMenuBtn={icon:"ms-Icon ms-Icon--FabricFolderSearch",onClick:function(){$("#navSearchContext").dxContextMenu("toggle",!0)}},c.contexualMenu={items:c.contexualList,target:"#contextSearchBtn",onItemClick:function(e){console.log(e),c.searchTypeFlag=e.itemData.value}},c.searchWorldox=function(e){var o,n=t.search();o=1===c.searchTypeFlag?(a.title="Text: "+e,a.bc="","?t "+encodeURIComponent(e)):0===c.searchTypeFlag?encodeURIComponent(e):2===c.searchTypeFlag?"?D "+encodeURIComponent(e)+" OR ?E "+encodeURIComponent(e)+" AND ?T "+encodeURIComponent(e):"?D "+encodeURIComponent(e)+" OR ?E "+encodeURIComponent(e)+" OR ?T "+encodeURIComponent(e)+" OR",c.chkRoute(n,o)},c.chkRoute=function(e,o){if(n.isOpeningDocPanel=!1,e.query!==o)return t.path("/home").search({query:o}),!1;r.reload()}}}}]);