"use strict";angular.module("WDWeb").controller("versionCtrl",["$scope","$timeout","$log","$route","uxService","profileService","wdService","$rootScope","$localStorage",function(n,s,e,r,o,t,i,c,a){var u=this;n.versionList=[],window.onresize=function(){$("#dxVerList").dxList("instance").option("height",u.getHeight())},n.$watch(function(){return o.getVersion()},function(e,n){u.showVersion=!1,u.getVerList(e)}),u.init=function(){""!=n.listOptions[0].Version&&i.getVersion(n.listOptions[0]).then(function(e){var n=e.data.root;if(""!=n.Header.ErrorCount)return DevExpress.ui.notify(n.Header.wd_Error_MSG,"error",4e3),!1;o.setVersion(n)},function(e){DevExpress.ui.notify("Fatal IIS Error!","error",4e3)})},u.setVersionList={bindingOptions:{dataSource:"versionList"},itemTemplate:"vers",height:function(){return u.getHeight()},useNativeScrolling:!0},u.getHeight=function(){return window.innerHeight-210},u.getVerList=function(e){0==e.length?n.versionList=[]:n.versionList=e,s(function(){u.showVersion=!0},1e3),u.closeList()},u.closeList=function(){if(a.verId)return i.clearListfromParm(a.verId).then(function(e){},function(e){DevExpress.ui.notify("Fatal IIS Error!","error",4e3)}),!1;a.verId=o.getVersionId()},u.getTypeLogo=function(e){switch(e){case"DOCX":case"DOC":case"DOTX":case"ODT":return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--word'></span>";case"CSV":case"ODS":case"XLS":case"XLSX":case"XLTX":return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--excel'></span>";case"MSG":return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--outlook'></span>";case"ODP":case"POTX":case"PPSX":case"PPTX":case"ODP":case"POT":case"PPS":case"PPT":return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--powerpoint'></span>";case"PDF":return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--pdf'></span>";case"JPG":case"PNG":case"GIF":case"JPEG":case"TIFF":return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--image'></span>";default:return"<span class='ms-BrandIcon--icon16 ms-BrandIcon--filler'></span>"}}}]);