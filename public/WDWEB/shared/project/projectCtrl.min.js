angular.module("WDWeb").controller("projectCtrl",["$scope","$rootScope","$route","$routeParams","$timeout","$log","$window","$localStorage","$location","template","wdService","homeService",function(e,o,t,r,a,l,n,i,u,c,p,d){e.uploadMode="instantly",e.value=[],e.accept="wdl",this.uploadToolBar=[{location:"before",text:"Project"}],this.openWDL={uploadUrl:i.host+i.uploadLocation.split("/SAVE")[0]+"/upload-file.asp?+ID=11633",bindingOptions:{multiple:!1,uploadMode:"uploadMode",value:"value"},labelText:"",onValueChanged:function(t){var r=t.value;if(0!=r.length){var e="",a=(1==r[0].name.split(".").length-1?r[e=0].name.split("."):(e=r[0].name.lastIndexOf("."),[r[0].name.slice(0,e),r[0].name.slice(e+1)]))[1].toUpperCase();$.each(r,function(e,o){if("WDL"!=a)return t.element.find(".dx-fileuploader-files-container .dx-fileuploader-cancel-button").eq(e).trigger("dxclick"),DevExpress.ui.notify("File must be a'WDL'!","error",4e3),!1;p.wdlOpen(r[0].name).then(function(e){var o=e.data.project;if(""!=o.errorStatus.ErrorCount)return DevExpress.ui.notify(o.errorStatus.wd_Error_MSG,"error",4e3),!1;console.log(r[0].name),u.path("/home").search({query:o.path})},function(e){l.error(e)})})}}}}]);