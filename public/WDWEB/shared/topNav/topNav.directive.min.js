"use strict";angular.module("WDWeb").directive("topMenu",[function(){return{restrict:"A",replace:!0,templateUrl:"./WDWEB/shared/topNav/header.html",controller:function(o,n,t,e,i,a,c,l,d){o.wdShowNavIco="ms-Icon ms-Icon--DoubleChevronLeft",o.softPop=!0,o.dwnIco,o.dwnTxt;var s=l.search();-1!=i.navigator.userAgent.indexOf("Frowser")?(o.softPop=!1,s.attach?(o.dwnIco="ms-Icon ms-Icon--Attach",o.dwnTxt="Attach"):(o.dwnIco="ms-Icon ms-Icon--OpenFile",o.dwnTxt="Open")):(o.dwnIco="ms-Icon ms-Icon--Download",o.dwnTxt="Download"),o.menu=[{name:"ADVANCED SEARCH",onClick:function(n){c.$broadcast("openPanel",{panel:n.itemData.name})}},{name:"DIRECT ACCESS",onClick:function(n){c.$broadcast("openPanel",{panel:n.itemData.name})}},{name:"UPLOAD",onClick:function(n){c.$broadcast("openPanel",{panel:n.itemData.name})},visible:o.softPop},{name:"PROJECT",onClick:function(n){var o=$("#wdlUpload").dxFileUploader("instance");o._isCustomClickEvent=!0,o._$fileInput.click()},visible:o.softPop},{name:"NEW TAB",icon:"ms-Icon ms-Icon--CircleAddition",onClick:function(n){c.$broadcast("openPanel",{panel:n.itemData.name})},visible:o.softPop}],o.wdMenuOptions={bindingOptions:{items:"menu"},displayExpr:"name",orientation:"horizontal",height:44},o.openMenu={bindingOptions:{icon:"wdShowNavIco"},text:"",elementAttr:{class:"openCloseBtn"},onClick:function(n){c.leftMenuAction=!c.leftMenuAction,c.leftMenuAction?o.wdShowNavIco="ms-Icon ms-Icon--DoubleChevronLeft":o.wdShowNavIco="ms-Icon ms-Icon--DoubleChevronRight ",c.$broadcast("setLeftSize")}},o.fileActionToolbar={adaptivityEnabled:!0,bindingOptions:{deep:!0,dataSource:"toolBarData"},height:"40px",onContentReady:function(n){setTimeout(function(){n.component._windowResizeCallBack()},4e3)}},o.toolBarData=[{location:"before",widget:"dxButton",locateInMenu:"auto",options:{bindingOptions:{icon:"dwnIco",text:"dwnTxt"},elementAttr:{id:"wdOpenFile"},onClick:function(n){a.isFileHasChanged().then(function(n){n?(c.$broadcast("showMessageWhenFileChanged"),setTimeout(function(){$("#btnConfirmCheckFile").on("click",function(n){n.preventDefault(),$("#popupFileChangedOptions").dxPopup().dxPopup("instance").hide(),c.$broadcast("fileAction",{type:"download"})})},200)):c.$broadcast("fileAction",{type:"download"})})}}},{location:"before",widget:"dxButton",options:{icon:"ms-Icon ms-Icon--PageCheckedOut",text:"Check-Out",elementAttr:{id:"wdChkOut"},onClick:function(o){a.isFileHasChanged().then(function(n){n?(c.$broadcast("showMessageWhenFileChanged"),setTimeout(function(){$("#btnConfirmCheckFile").on("click",function(n){n.preventDefault(),c.$broadcast("fileAction",{type:"checkOut",data:n}),$("#popupFileChangedOptions").dxPopup().dxPopup("instance").hide()})},200)):c.$broadcast("fileAction",{type:"checkOut",data:o})})}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"ms-Icon ms-Icon--Edit",text:"Edit Metadata",elementAttr:{id:"wdEditProfile"},onClick:function(n){c.$broadcast("fileAction",{type:"editProfile",data:n,profile:"Edit"})}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"ms-Icon ms-Icon--Copy",text:"Copy",elementAttr:{id:"wdCopyProfile"},onClick:function(n){c.$broadcast("fileAction",{type:"editProfile",data:n,profile:"Copy"})}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"ms-Icon ms-Icon--Mail",text:"Email",elementAttr:{id:"wdEmail"},onClick:function(n){c.$broadcast("fileAction",{type:"eMail",data:n,profile:"Email"})}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"ms-Icon ms-Icon--EntryView",text:"View",elementAttr:{id:"wdViewFile"},onClick:function(o){a.isFileHasChanged().then(function(n){n?(c.$broadcast("showMessageWhenFileChanged"),setTimeout(function(){$("#btnConfirmCheckFile").on("click",function(n){n.preventDefault(),c.$broadcast("fileAction",{type:"view",data:o}),$("#popupFileChangedOptions").dxPopup().dxPopup("instance").hide()})},200)):c.$broadcast("fileAction",{type:"view",data:o})})}}},{location:"before",widget:"dxButton",options:{icon:"ms-Icon ms-Icon--Refresh",text:"Refresh",onClick:function(n){c.$broadcast("fileAction",{type:"reFresh"})}}}]}}}]);