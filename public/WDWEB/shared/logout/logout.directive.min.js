"use strict";angular.module("WDWeb").directive("wdxLogout",[function(){return{restrict:"E",replace:!0,templateUrl:"./WDWEB/shared/logout/logout.html",controller:function(o,t,n,e,l,i,r){o.wdLogOffBtn=!0;var c=document.querySelector(".header-limiter"),u=c.querySelector(".ms-Dialog"),a=c.querySelector(".logOut"),s=new fabric.Dialog(u);o.init=function(){t(function(){angular.element(document).ready(function(){a.onclick=function(){s.open()},c.onclick=function(e){-1!=e.target.className.indexOf("ms-Overlay")&&s.open()}})},0)},o.logOff=function(){o.wdLogOffBtn=!1;var e=[n.wdListID,n.ftListId,n.wdWorkSpaceID];i.$broadcast("closeAllPanel"),angular.forEach(e,function(o,e,t){void 0!==o&&r.clearListfromParm(o).then(function(e){console.log("List Id"+o+" deleted")})}),t(function(){l.logout().then(function(e){o.redirect()},function(e){o.redirect()})},1e3)},o.redirect=function(){n.$reset(),i.showElements=!1,e.path("/login"),e.url(e.path()),$(".logout-module .ms-Dialog.is-open").removeClass("is-open"),$(".logout-module .ms-Overlay.is-visible").removeClass("is-visible"),o.wdLogOffBtn=!0},o.cancelLogOff=function(){s.close()}}}}]);